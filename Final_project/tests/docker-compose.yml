version: '2.1'

networks:
  myapp_network:
    external: true
    name: myapp_network

services:
  selenoid:
    image: "aerokube/selenoid:latest"
    networks:
      - myapp_network
    volumes:
      - ./browsers.json:/etc/selenoid/browsers.json
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "4444:4444"
    command: [ "-container-network", "myapp_network" ]

  selenoid-ui:
    image: "aerokube/selenoid-ui:latest"
    networks:
      - myapp_network
    ports:
      - "9090:8080"
    command: [ "--selenoid-uri", "http://selenoid:4444" ]
    depends_on:
      selenoid:
        condition: service_started
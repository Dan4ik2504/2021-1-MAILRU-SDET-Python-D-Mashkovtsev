version: '2.1'

networks:
  myapp_network:
    external: true
    name: ${DOCKER_NETWORK_NAME}

services:
  selenoid:
    image: "aerokube/selenoid:latest"
    networks:
      - myapp_network
    volumes:
      - ./browsers.json:/etc/selenoid/browsers.json
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "${SELENOID_PORT}:4444"
    command: [ "-container-network", "${DOCKER_NETWORK_NAME}" ]

  selenoid-ui:
    image: "aerokube/selenoid-ui:latest"
    networks:
      - myapp_network
    ports:
      - "${SELENOID_UI_PORT}:8080"
    command: [ "--selenoid-uri", "http://selenoid:${SELENOID_PORT}" ]
    depends_on:
      selenoid:
        condition: service_started